module.exports=function(t){function e(n){if(i[n])return i[n].exports;var s=i[n]={exports:{},id:n,loaded:!1};return t[n].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.SingleImgView=void 0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(1),h=n(l),u=i(2),c=n(u),p=i(3),f=n(p),d=i(4),y=n(d),b=i(5),v=n(b);i(6);var m=40,g=function(t){function e(t){s(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.state={current:0},i.initScale=1,i.arrLength=0,i.screenWidth=window.innerWidth||window.screen.availWidth,i.screenHeight=window.innerHeight||window.screen.availHeight,i.list=null,i.ob=null,i.focused=null,i}return r(e,t),a(e,[{key:"render",value:function(){var t=this;return h.default.createElement("div",{className:"imageview"},h.default.createElement(c.default,{onPressMove:this.onPressMove.bind(this),onSwipe:this.onSwipe.bind(this)},h.default.createElement("ul",{id:"imagelist",ref:"imagelist",className:"imagelist"},this.props.imagelist.map(function(e,i){return h.default.createElement("li",{className:"imagelist-item",key:"img"+i},h.default.createElement(c.default,{onPressMove:t.onPicPressMove.bind(t),onMultipointStart:t.onMultipointStart.bind(t),onLongTap:t.onLongTap.bind(t),onPinch:t.onPinch.bind(t),onRotate:t.onRotate.bind(t),onMultipointEnd:t.onMultipointEnd.bind(t),onDoubleTap:t.onDoubleTap.bind(t)},h.default.createElement(y.default,{id:"view"+i,className:"imagelist-item-img",src:e})))}))))}},{key:"componentDidMount",value:function(){this.arrLength=this.props.imagelist.length,this.list=this.refs.imagelist,this.ob=document.getElementById("view"+this.state.current),(0,f.default)(this.list),(0,f.default)(this.ob)}},{key:"onPressMove",value:function(t){var e=this.state.current;this.endAnimation(),this.focused||(0===e&&t.deltaX>0||e===this.arrLength-1&&t.deltaX<0?this.list.translateX+=t.deltaX/3:this.list.translateX+=t.deltaX),t.preventDefault()}},{key:"onPicPressMove",value:function(t){this.endAnimation();var e=t.deltaX,i=t.deltaY;this.checkInArea(e,i)?(this.ob.translateX+=e,this.ob.translateY+=i,this.focused=!0):this.focused=!1}},{key:"onSwipe",value:function(t){var e=t.direction,i=this.state.current;if(this.focused)return!1;switch(e){case"Left":i<this.arrLength-1&&++i&&this.bindStyle(i);break;case"Right":i>0&&--i&&this.bindStyle(i)}this.changeIndex(i)}},{key:"onMultipointStart",value:function(){this.endAnimation()}},{key:"onPinch",value:function(t){return!this.props.disablePinch&&(this.ob.scaleX=this.ob.scaleY=this.initScale*t.scale,void(this.ob.style.webkitTransition="cubic-bezier(.15,.01,.88,1)"))}},{key:"onRotate",value:function(t){return!this.props.disableRotate&&(this.ob.rotateZ+=t.angle,void(this.ob.style.webkitTransition="cubic-bezier(.15,.01,.88,1)"))}},{key:"onLongTap",value:function(){this.props.longTap&&this.props.longTap()}},{key:"onMultipointEnd",value:function(t){this.changeIndex(this.state.current),this.ob.scaleX<1&&this.setScale(1),this.ob.scaleX>2&&this.setScale(2);var e=this.ob.rotateZ%360,i=this.ob.getAttribute("rate");e<0&&(e=360+e),this.ob.rotateZ=e,e>0&&e<45?(this.ob.rotateZ=0,this.setScale(1)):e>=315?(this.ob.rotateZ=360,this.setScale(1)):e>=45&&e<135?(this.ob.rotateZ=90,this.setScale(i)):e>=135&&e<225?(this.ob.rotateZ=180,this.setScale(1)):e>=225&&e<315&&(this.ob.rotateZ=270,this.setScale(i))}},{key:"onDoubleTap",value:function(t){if(this.props.disableDoubleTap)return!1;var e=t.origin,i=e[0]-this.screenWidth/2,n=e[1]-this.screenHeight/2;1===this.ob.scaleX?(this.ob.translateX=this.ob.originX=i,this.ob.translateY=this.ob.originY=n,this.setScale(2)):(this.ob.translateX=this.ob.originX,this.ob.translateY=this.ob.originY,this.setScale(1))}},{key:"bindStyle",value:function(t){var e=this;this.setState({current:t},function(){e.restore(),e.ob=document.getElementById("view"+t),e.ob.scaleX||(0,f.default)(e.ob)})}},{key:"changeIndex",value:function(t){this.list.style.webkitTransition="300ms ease",this.list.translateX=-t*(this.screenWidth+m)}},{key:"setScale",value:function(t){this.ob.style.webkitTransition="300ms ease-in-out",this.ob.scaleX=this.ob.scaleY=t}},{key:"restore",value:function(){this.ob.translateX=this.ob.translateY=0,this.ob.rotateZ=0,this.ob.scaleX=this.ob.scaleY=1,this.ob.originX=this.ob.originY=0}},{key:"endAnimation",value:function(){this.list.style.webkitTransition="0",this.ob.style.webkitTransition="0"}},{key:"checkInArea",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this.ob,n=i.scaleX,s=i.translateX,o=i.translateY,r=i.originX,a=i.originY,l=this.ob.getAttribute("rate");if(1!==n||n!==l){var h=(n-1)*this.screenWidth/2+r,u=-(n-1)*this.screenWidth/2+r,c=(n-1)*this.screenHeight/2+a,p=-(n-1)*this.screenHeight/2+a;if(s-r+t<=h&&s-r+t>=u&&o-a+e<=c&&o-a+e>=p)return!0}return!1}}]),e}(l.Component);g.propTypes={imagelist:h.default.PropTypes.array.isRequired,disablePinch:h.default.PropTypes.bool,disableRotate:h.default.PropTypes.bool,disableDoubleTap:h.default.PropTypes.bool,longTap:h.default.PropTypes.func};e.SingleImgView=new v.default(g);e.default=g},function(t,e){t.exports=require("react")},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(1),h=n(l),u=function(t){function e(t){s(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.preV={x:null,y:null},i.pinchStartLen=null,i.scale=1,i.isDoubleTap=!1,i.delta=null,i.last=null,i.now=null,i.end=null,i.multiTouch=!1,i.tapTimeout=null,i.longTapTimeout=null,i.swipeTimeout=null,i.x1=i.x2=i.y1=i.y2=null,i.preTapPosition={x:null,y:null},i}return r(e,t),a(e,[{key:"getLen",value:function(t){return Math.sqrt(t.x*t.x+t.y*t.y)}},{key:"dot",value:function(t,e){return t.x*e.x+t.y*e.y}},{key:"getAngle",value:function(t,e){var i=this.getLen(t)*this.getLen(e);if(0===i)return 0;var n=this.dot(t,e)/i;return n>1&&(n=1),Math.acos(n)}},{key:"cross",value:function(t,e){return t.x*e.y-e.x*t.y}},{key:"getRotateAngle",value:function(t,e){var i=this.getAngle(t,e);return this.cross(t,e)>0&&(i*=-1),180*i/Math.PI}},{key:"_resetState",value:function(){this.setState({x:null,y:null,swiping:!1,start:0})}},{key:"_emitEvent",value:function(t){if(this.props[t]){for(var e,i=arguments.length,n=Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];(e=this.props)[t].apply(e,n)}}},{key:"_handleTouchStart",value:function(t){var e=this;this.now=Date.now(),this.x1=t.touches[0].pageX,this.y1=t.touches[0].pageY,this.delta=this.now-(this.last||this.now),null!==this.preTapPosition.x&&(this.isDoubleTap=this.delta>0&&this.delta<=250&&Math.abs(this.preTapPosition.x-this.x1)<30&&Math.abs(this.preTapPosition.y-this.y1)<30),this.preTapPosition.x=this.x1,this.preTapPosition.y=this.y1,this.last=this.now;var i=this.preV,n=t.touches.length;if(n>1){var s={x:t.touches[1].pageX-this.x1,y:t.touches[1].pageY-this.y1};i.x=s.x,i.y=s.y,this.pinchStartLen=this.getLen(i),this._emitEvent("onMultipointStart",t)}this.longTapTimeout=setTimeout(function(){e._emitEvent("onLongTap",t)},750)}},{key:"_handleTouchMove",value:function(t){var e=this.preV,i=t.touches.length,n=t.touches[0].pageX,s=t.touches[0].pageY;if(this.isDoubleTap=!1,i>1){var o={x:t.touches[1].pageX-n,y:t.touches[1].pageY-s};null!==e.x&&(this.pinchStartLen>0&&(t.scale=this.getLen(o)/this.pinchStartLen,this._emitEvent("onPinch",t)),t.angle=this.getRotateAngle(o,e),this._emitEvent("onRotate",t)),e.x=o.x,e.y=o.y,this.multiTouch=!0}else null!==this.x2?(t.deltaX=n-this.x2,t.deltaY=s-this.y2):(t.deltaX=0,t.deltaY=0),this._emitEvent("onPressMove",t);this._cancelLongTap(),this.x2=n,this.y2=s,i>1&&t.preventDefault()}},{key:"_handleTouchCancel",value:function(){clearInterval(this.tapTimeout),clearInterval(this.longTapTimeout),clearInterval(this.swipeTimeout)}},{key:"_handleTouchEnd",value:function(t){var e=this;this.end=Date.now(),this._cancelLongTap(),t.touches.length<2&&this._emitEvent("onMultipointEnd",t),t.origin=[this.x1,this.y1],this.multiTouch===!1&&(this.x2&&Math.abs(this.x1-this.x2)>30||this.y2&&Math.abs(this.preV.y-this.y2)>30?(t.direction=this._swipeDirection(this.x1,this.x2,this.y1,this.y2),t.distance=Math.abs(this.x1-this.x2),this.swipeTimeout=setTimeout(function(){e._emitEvent("onSwipe",t)},0)):this.tapTimeout=setTimeout(function(){e._emitEvent("onTap",t),e.isDoubleTap&&(e._emitEvent("onDoubleTap",t),e.isDoubleTap=!1)},0)),this.preV.x=0,this.preV.y=0,this.scale=1,this.pinchStartLen=null,this.x1=this.x2=this.y1=this.y2=null,this.multiTouch=!1}},{key:"_cancelLongTap",value:function(){clearTimeout(this.longTapTimeout)}},{key:"_swipeDirection",value:function(t,e,i,n){return Math.abs(t-e)>80||this.end-this.now<250?Math.abs(t-e)>=Math.abs(i-n)?t-e>0?"Left":"Right":i-n>0?"Up":"Down":"Nochange"}},{key:"render",value:function(){return h.default.cloneElement(h.default.Children.only(this.props.children),{onTouchStart:this._handleTouchStart.bind(this),onTouchMove:this._handleTouchMove.bind(this),onTouchCancel:this._handleTouchCancel.bind(this),onTouchEnd:this._handleTouchEnd.bind(this)})}}]),e}(l.Component);e.default=u},function(t,e){"use strict";function i(t,e,i){for(var s=0,o=e.length;s<o;s++){var r=e[s];n(t,r,i)}}function n(t,e,i){Object.defineProperty(t,e,{get:function(){return this["__"+e]},set:function(t){t!==this["__"+e]&&(this["__"+e]=t,i())}})}var s=function(t,e,i,n,s,o,r,a,l,h,u,c,p,f,d,y){this.elements=window.Float32Array?new Float32Array(16):[];var b=this.elements;b[0]=void 0!==t?t:1,b[4]=e||0,b[8]=i||0,b[12]=n||0,b[1]=s||0,b[5]=void 0!==o?o:1,b[9]=r||0,b[13]=a||0,b[2]=l||0,b[6]=h||0,b[10]=void 0!==u?u:1,b[14]=c||0,b[3]=p||0,b[7]=f||0,b[11]=d||0,b[15]=void 0!==y?y:1};s.DEG_TO_RAD=Math.PI/180,s.prototype={set:function(t,e,i,n,s,o,r,a,l,h,u,c,p,f,d,y){var b=this.elements;return b[0]=t,b[4]=e,b[8]=i,b[12]=n,b[1]=s,b[5]=o,b[9]=r,b[13]=a,b[2]=l,b[6]=h,b[10]=u,b[14]=c,b[3]=p,b[7]=f,b[11]=d,b[15]=y,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},multiplyMatrices:function(t,e){var i=t.elements,n=this.elements,s=i[0],o=i[4],r=i[8],a=i[12],l=i[1],h=i[5],u=i[9],c=i[13],p=i[2],f=i[6],d=i[10],y=i[14],b=i[3],v=i[7],m=i[11],g=i[15],T=e[0],_=e[1],w=e[2],x=e[3],M=e[4],k=e[5],X=e[6],P=e[7],E=e[8],O=e[9],S=e[10],D=e[11],Y=e[12],A=e[13],j=e[14],L=e[15];return n[0]=s*T+o*M+r*E+a*Y,n[4]=s*_+o*k+r*O+a*A,n[8]=s*w+o*X+r*S+a*j,n[12]=s*x+o*P+r*D+a*L,n[1]=l*T+h*M+u*E+c*Y,n[5]=l*_+h*k+u*O+c*A,n[9]=l*w+h*X+u*S+c*j,n[13]=l*x+h*P+u*D+c*L,n[2]=p*T+f*M+d*E+y*Y,n[6]=p*_+f*k+d*O+y*A,n[10]=p*w+f*X+d*S+y*j,n[14]=p*x+f*P+d*D+y*L,n[3]=b*T+v*M+m*E+g*Y,n[7]=b*_+v*k+m*O+g*A,n[11]=b*w+v*X+m*S+g*j,n[15]=b*x+v*P+m*D+g*L,this},_rounded:function(t,e){return e=Math.pow(10,e||15),Math.round(t*e)/e},appendTransform:function(t,e,i,n,o,r,a,l,h,u,c,p,f,d){var y=a*s.DEG_TO_RAD,b=this._rounded(Math.cos(y)),v=this._rounded(Math.sin(y)),m=l*s.DEG_TO_RAD,g=this._rounded(Math.cos(m)),T=this._rounded(Math.sin(m)),_=h*s.DEG_TO_RAD,w=this._rounded(Math.cos(_*-1)),x=this._rounded(Math.sin(_*-1));return this.multiplyMatrices(this,[1,0,0,t,0,b,v,e,0,-v,b,i,0,0,0,1]),this.multiplyMatrices(this,[g,0,T,0,0,1,0,0,-T,0,g,0,0,0,0,1]),this.multiplyMatrices(this,[w*n,x*o,0,0,-x*n,w*o,0,0,0,0,1*r,0,0,0,0,1]),(u||c)&&this.multiplyMatrices(this,[this._rounded(Math.cos(u*s.DEG_TO_RAD)),this._rounded(Math.sin(u*s.DEG_TO_RAD)),0,0,-1*this._rounded(Math.sin(c*s.DEG_TO_RAD)),this._rounded(Math.cos(c*s.DEG_TO_RAD)),0,0,0,0,1,0,0,0,0,1]),(p||f||d)&&(this.elements[12]-=p*this.elements[0]+f*this.elements[4]+d*this.elements[8],this.elements[13]-=p*this.elements[1]+f*this.elements[5]+d*this.elements[9],this.elements[14]-=p*this.elements[2]+f*this.elements[6]+d*this.elements[10]),this}};var o=function(t){i(t,["translateX","translateY","translateZ","scaleX","scaleY","scaleZ","rotateX","rotateY","rotateZ","skewX","skewY","originX","originY","originZ"],function(){var e=t.matrix3D.identity().appendTransform(t.translateX,t.translateY,t.translateZ,t.scaleX,t.scaleY,t.scaleZ,t.rotateX,t.rotateY,t.rotateZ,t.skewX,t.skewY,t.originX,t.originY,t.originZ);t.style.transform=t.style.msTransform=t.style.OTransform=t.style.MozTransform=t.style.webkitTransform="perspective("+t.perspective+"px) matrix3d("+Array.prototype.slice.call(e.elements).join(",")+")"}),i(t,["perspective"],function(){t.style.transform=t.style.msTransform=t.style.OTransform=t.style.MozTransform=t.style.webkitTransform="perspective("+t.perspective+"px) matrix3d("+Array.prototype.slice.call(t.matrix3D.elements).join(",")+")"}),t.matrix3D=new s,t.perspective=500,t.scaleX=t.scaleY=t.scaleZ=1,t.translateX=t.translateY=t.translateZ=t.rotateX=t.rotateY=t.rotateZ=t.skewX=t.skewY=t.originX=t.originY=t.originZ=0};t.exports=o},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},l=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(1),u=n(h),c=function(t){function e(){return s(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return r(e,t),l(e,[{key:"render",value:function(){return u.default.createElement("img",a({onLoad:this.onImgLoad.bind(this)},this.props))}},{key:"onImgLoad",value:function(t){var e=t.target,i=e.naturalHeight,n=e.naturalWidth,s=i/n,o=window.innerHeight||window.screen.availHeight,r=window.innerWidth||window.screen.availWidth,a=o/r,l={};s>a?(l.height=o+"px",l.width=n*o/i+"px",l.left=r/2-n*o/i/2+"px"):s<a?(l.width=r+"px",l.height=i*r/n+"px",l.top=o/2-i*r/n/2+"px"):(l.width=r,l.height=o),e.setAttribute("style","width:"+l.width+"; height:"+l.height+"; left:"+l.left+"; top:"+l.top+";"),e.setAttribute("rate",1/s)}}]),e}(h.Component);e.default=c},function(t,e){t.exports=require("react-singleton")},function(t,e){}]);